/**
 * Indonesian to English Food Name Translation Dictionary
 * Comprehensive list of 150+ common Indonesian foods
 */

export const indonesianFoodTranslations: Record<string, string> = {
    // Staple foods
    nasi: "rice",
    beras: "nasi",
    "nasi putih": "white rice",
    "nasi merah": "red rice",
    "nasi kuning": "turmeric rice",
    "nasi goreng": "fried rice",
    roti: "bread",
    "roti tawar": "white bread",
    "roti gandum": "wheat bread",
    "roti bakar": "toasted bread",
    "roti manis": "sweet bread",
    mi: "noodles",
    mie: "noodles",
    "mie goreng": "fried noodles",
    "mie rebus": "boiled noodles",
    "mi instant": "instant noodles",
    bihun: "rice noodles",
    kwetiau: "stir-fried noodles",
    pasta: "pasta",
    spaghetti: "spaghetti",

    // Poultry
    ayam: "chicken",
    "dada ayam": "chicken breast",
    "paha ayam": "chicken thigh",
    "sayap ayam": "chicken wing",
    "ayam goreng": "fried chicken",
    "ayam panggang": "grilled chicken",
    bebek: "duck",
    "bebek panggang": "roasted duck",
    kalkun: "turkey",

    // Beef
    daging: "meat",
    "daging sapi": "beef",
    "daging giling": "ground meat",
    sapi: "beef",
    steak: "steak",
    ribs: "ribs",

    // Pork
    babi: "pork",
    "daging babi": "pork",

    // Fish & Seafood
    ikan: "fish",
    salmon: "salmon",
    tuna: "tuna",
    "ikan tongkol": "skipjack tuna",
    "ikan cakalang": "smoked fish",
    "ikan mas": "carp",
    "ikan lele": "catfish",
    "ikan bawal": "pomfret",
    "ikan bandeng": "milkfish",
    udang: "shrimp",
    "udang besar": "prawns",
    cumi: "squid",
    "cumi-cumi": "squid",
    sotong: "cuttlefish",
    gurita: "octopus",
    kerang: "clams",
    tiram: "oysters",
    kepiting: "crab",
    lobster: "lobster",

    // Eggs
    telur: "egg",
    "telur ayam": "chicken egg",
    "telur bebek": "duck egg",
    "telur asin": "salted egg",
    "telur rebus": "boiled egg",
    "telur goreng": "fried egg",
    "telur dadar": "omelet",

    // Dairy
    susu: "milk",
    "susu sapi": "cow milk",
    "susu kambing": "goat milk",
    keju: "cheese",
    yogurt: "yogurt",
    mentega: "butter",

    // Vegetables
    sayur: "vegetable",
    bayam: "spinach",
    kangkung: "morning glory",
    brokoli: "broccoli",
    kol: "cabbage",
    kubis: "cabbage",
    wortel: "carrot",
    kentang: "potato",
    "kentang goreng": "french fries",
    tomat: "tomato",
    mentimun: "cucumber",
    paprika: "bell pepper",
    lombok: "chili pepper",
    cabai: "chili",
    "cabai merah": "red chili",
    "cabai hijau": "green chili",
    terong: "eggplant",
    buncis: "green beans",
    "kacang panjang": "long beans",
    tauge: "bean sprouts",
    jagung: "corn",
    "jagung manis": "sweet corn",
    nangka: "jackfruit",
    labu: "pumpkin",
    "labu siam": "chayote",
    bawang: "onion",
    "bawang merah": "red onion",
    "bawang putih": "garlic",
    "bawang bombay": "big onion",

    // Fruits
    buah: "fruit",
    apel: "apple",
    pisang: "banana",
    "pisang goreng": "fried banana",
    jeruk: "orange",
    "jeruk nipis": "lime",
    lemon: "lemon",
    mangga: "mango",
    nanas: "pineapple",
    pepaya: "papaya",
    melon: "melon",
    semangka: "watermelon",
    strawberry: "strawberry",
    blueberry: "blueberry",
    raspberry: "raspberry",
    "buah naga": "dragon fruit",
    rambutan: "rambutan",
    durian: "durian",
    duku: "langsat",
    salak: "snake fruit",
    mangostana: "mangosteen",
    sirsak: "soursop",
    markisa: "passion fruit",
    kurma: "date",
    "buah anggur": "grape",

    // Legumes
    kacang: "peanut",
    kedelai: "soybean",
    "kedelai hitam": "black soybean",
    tempe: "tempeh",
    tahu: "tofu",
    "tahu goreng": "fried tofu",
    "tahu putih": "white tofu",
    "kacang hijau": "mung bean",
    "kacang merah": "red bean",
    "kacang almond": "almond",
    "kacang mete": "cashew",

    // Spices & Seasonings
    garam: "salt",
    gula: "sugar",
    "gula pasir": "granulated sugar",
    "gula merah": "palm sugar",
    minyak: "oil",
    "minyak kelapa": "coconut oil",
    "minyak goreng": "cooking oil",
    "minyak zaitun": "olive oil",
    lada: "pepper",
    ketumbar: "coriander",
    kunyit: "turmeric",
    jahe: "ginger",
    lengkuas: "galangal",
    santan: "coconut milk",

    // Soy products
    kecap: "soy sauce",
    "kecap manis": "sweet soy sauce",
    "kecap asin": "salty soy sauce",
    terasi: "shrimp paste",

    // Soups & Broths
    sup: "soup",
    kaldu: "broth",
    "kaldu ayam": "chicken broth",
    "kaldu sapi": "beef broth",
    soto: "soup",
    "soto ayam": "chicken soup",
    "soto sapi": "beef soup",
    rawon: "black beef soup",
    bakso: "meatball soup",

    // Traditional dishes
    rendang: "rendang",
    "rendang daging": "beef rendang",
    "gado gado": "gado-gado",
    perkedel: "potato fritter",
    martabak: "stuffed pancake",
    bakpia: "pastry",
    krupuk: "prawn crackers",
    "krupuk udang": "shrimp crackers",
    empal: "beef jerky",
    dendeng: "beef jerky",
    sate: "satay",
    satay: "satay",
    "sate ayam": "chicken satay",
    "sate sapi": "beef satay",
    lumpia: "spring rolls",
    "lumpia goreng": "fried spring rolls",

    // Desserts & Sweets
    kue: "cake",
    "kue lapis": "layer cake",
    "kue donat": "donut",
    donat: "donut",
    brownies: "brownies",
    cookies: "cookies",
    puding: "pudding",
    es: "ice",
    "es krim": "ice cream",
    "es campur": "mixed ice",
    cendol: "cendol",
    bubur: "porridge",
    "bubur ayam": "chicken porridge",
    "bubur kacang hijau": "mung bean porridge",
    jeli: "jelly",

    // Drinks
    air: "water",
    teh: "tea",
    "teh hitam": "black tea",
    "teh hijau": "green tea",
    "teh manis": "sweet tea",
    kopi: "coffee",
    "kopi hitam": "black coffee",
    "kopi susu": "coffee with milk",
    jus: "juice",
    "jus jeruk": "orange juice",
    "jus apel": "apple juice",
    "jus mangga": "mango juice",
    sirup: "syrup",
    soda: "soda",
    bir: "beer",
    arak: "rice wine",
    tuak: "palm wine",

    // Snacks
    keripik: "chips",
    "keripik singkong": "cassava chips",
    "keripik kentang": "potato chips",
    pretzel: "pretzel",
    cracker: "crackers",
    "kacang panggang": "roasted peanuts",
    "kacang asin": "salted peanuts",

    // Sauces
    sambal: "chili sauce",
    "sambal merah": "red chili sauce",
    "sambal hijau": "green chili sauce",
    saus: "sauce",
    "saus tomat": "tomato sauce",
    "saus cabai": "chili sauce",
    mayones: "mayonnaise",

    // Processed foods
    ham: "ham",
    sosis: "sausage",
    kornet: "corned beef",
    "daging kaleng": "canned meat",
    "ikan kaleng": "canned fish",
    "susu bubuk": "powdered milk",
};

/**
 * Get English translation for Indonesian food name
 * @param indonesianName - The Indonesian food name
 * @returns The English translation, or the original name if not found
 */
export function translateFoodName(indonesianName: string): string {
    const normalized = indonesianName.trim().toLowerCase();
    return indonesianFoodTranslations[normalized] || normalized;
}

/**
 * Build reverse translation map (English -> Indonesian)
 */
function buildReverseTranslationMap(): Record<string, string> {
    const reverseMap: Record<string, string> = {};
    for (const [indonesian, english] of Object.entries(
        indonesianFoodTranslations
    )) {
        const englishLower = english.toLowerCase();
        // Prefer the most specific Indonesian name (longer key)
        if (
            !reverseMap[englishLower] ||
            indonesian.length > reverseMap[englishLower].length
        ) {
            reverseMap[englishLower] = indonesian;
        }
    }
    return reverseMap;
}

const englishToIndonesianMap = buildReverseTranslationMap();

/**
 * Capitalize each word in a string (Title Case)
 * @param str - The string to capitalize
 * @returns The string with each word capitalized
 */
function capitalizeWords(str: string): string {
    return str
        .split(" ")
        .map(
            (word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
        )
        .join(" ");
}

/**
 * Translate food name from English to Indonesian using USDA names
 * @param englishName - The English/USDA food name (e.g., "APPLE, RAW")
 * @returns The Indonesian name if found, otherwise the input name (Title Case)
 */
export function translateFoodNameToIndonesian(englishName: string): string {
    if (!englishName) return englishName;

    const normalized = englishName.trim().toLowerCase();

    // Try exact match first
    if (englishToIndonesianMap[normalized]) {
        return capitalizeWords(englishToIndonesianMap[normalized]);
    }

    // Try to extract main food word from USDA format (e.g., "APPLE, RAW" -> "apple")
    const mainWord = normalized.split(",")[0].split(" ")[0].trim();
    if (mainWord && englishToIndonesianMap[mainWord]) {
        return capitalizeWords(englishToIndonesianMap[mainWord]);
    }

    // If not found, return original with Title Case
    return capitalizeWords(englishName);
}
